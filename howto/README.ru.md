# Раздел 0 - дабы вилохвоста приманить...
Следуя данной инструкции, ты смастеришь своими руками модифицированную прошивку для мультистомпа.

Чтобы все прошло хорошо, прочитай инструкцию целиком, приготовь все необходимое, и запасись временем.

Я рекомендую использовать ИБП или ноутбук с хорошей и полностью заряженной батареей.

Я рекомендую использовать USB кабель в хорошем состоянии и с надежным подключением.

Если модифицируешь эффект не в первый раз, всегда начинай с оригинального файла, а не с модифицированной версии.

Внимание: мне не доводилось терять патчи самому, но я всегда оставался в рамках одной версии прошивки. Сделай резервную копию настроек, чтобы потом не было обидно. Для этого есть программы, или можно просто их сфотографировать.

# Раздел 1 - программы
Скачай [Zoom Effect Manager](https://vk.com/zoomeffectmanager). С помощью этой программы можно управлять списком эффектов, плюс в ней уже есть все файлы эффектов. На момент написания была актуальна версия 1.1.1.

Распакуй архив туда, где можно будет запускать и изменять все файлы. Запомни путь до папки, я буду называть ее `Z:\FOO`.

Скачай [Lunar IPS](http://fusoya.eludevisibility.org/lips/index.html). С помощью этой программы мои изменения применяются к твоим _законно полученным_ эффектам. Я использовал версию 1.02, на сайте я видел уже и 1.03, но я думаю обе заработают. Русской версии я не видел, но там две с половиной кнопки, я в тебя верю.

Скачай .ips для эффекта который ты хочешь в разделе [Releases](https://github.com/ELynx/zoom-fx-modding/releases).

Приготовь текстовый редактор. Встроенный "Блокнот" подойдет.

# Раздел 2 - делаем прошивку
## Копируем LINESEL.ZDL для изменений
Повтори этот шаг для каждого .ips файла.

Lunar IPS сразу меняет файлы, нужно приготовить исходные файлы. Начни с оригинального LINESEL.ZDL, а не с модифицированных до этого версий.

* Начни с `Z:\FOO`
* Перейди в `Z:\FOO\files\effects`
* Найди `LINESEL.ZDL`
* Сделай копию, переименуй файл:
  * RainSel - `RAINSEL.ZDL`
  * RTFM - `RTFM.ZDL`

## Модифицируем копии ZDL
Повтори этот шаг для каждого .ips файла. Для `FOO.ips` на предыдущем шаге был приготовлен файл `FOO.ZDL`.

* Запусти Lunar IPS
* Нажми `Apply IPS Patch`
* Выбери .ips файл
* Когда спросят о файле, который нужно менять
  * Смени фильтр `Most Common ROM Files` на `All Files (*.*)`
  * Выбери `Z:\FOO\files\effects\FOO.ZDL`
* Программа скажет `Patching Complete!`. Нажми OK чтобы ее закрыть.

## Модифицируем список эффектов
Версия 1.1.1 Zoom Effect Manager не рассчитана на моды и новые эффекты. Нужно добавить новые эффекты в список, чтобы при создании прошивки их можно было выбрать.

* Перейди в `Z:\FOO\files`
* Открой effects_settings.csv "Блокнотом"
* Промотай в конец файла. Выключи перенос строк чтобы было проще ориентироваться
* Добавь в конец файла:

RainSel

`XXX;RailSel;RAINSEL.ZDL;;MS-50G;MS-60B;MS-70CDR;G1on;B1on;Rain Sel EN;Rain Sel RU;FLTR;0x02;1.01`

RTFM

`XXX;RTFM;RTFM.ZDL;;MS-50G;MS-60B;MS-70CDR;G1on;B1on;R.T.F.M. EN;R.T.F.M. RU;FLTR;0x02;1.00`

* Замени XXX подходящими числами, чтобы продолжить порядковый номер. У меня это были 235 и 236 когда я добавлял оба эффекта.

# Раздел 3 - готовим и прошиваем
Прошивка создается с помощью Zoom Firmware Manager. Запускаем .exe из папки `Z:\FOO`, и далее по инструкции к программе.

Кратко, выбери тип своего устройства, выбери желаемые эффекты.

Убедись что модифицированные эффекты добавлены в список.

Осторожно: дальше расписано как прошить свой мультистомп. Следуй всем рекомендациям по обновлению прошивки от производителя, всем инструкциям из Zoom Effect Manager. Не прерывай USB соединение, берегись отключения электричества и так далее. В целом процесс занимает минут 5. Наберись терпения и не теребонькай MIDI и USB устройства. По моему опыту, это единственный шаг когда нужно активно быть осторожным и аккуратным.

Запусти мультистомп в режиме обновления прошивки. В целом - читай инструкцию, для MS-60B я нажимал кнопки ВВЕРХ и ВНИЗ, и затем подключал устройство по USB. Вместо родной заставки и привычного вида на эффекты, появится приглашение к прошивке. Обычно в первый раз Винда начинает находить новые USB и MIDI устройства.

Возвращайся в Zoom Effect Manager.

Нажимай `Записать эффекты`.

Запустится модифицированный прошивальщик. Это то же самое, что и родная программа для обновления прошивки, но в нее зашиты выбранные эффекты.

В этой программе следуй инструкциям на экране. Собственно, это и есть процесс прошивки.

Программа скажет, что прошивка завершена, закрой ее.

На мультистомпе так же будет написано, что обновление завершено, и будет предложено перезапустить эффект. Выключи и включи его чтобы запустить в обычном режиме.

Поздравляю, готово! (Или "мои соболезнования", если нет).

# Раздел 4 - об эффектах
[RailSel](RainSel.ru.md)

[RTFM](RTFM.ru.md)

# Раздел 5 - восстанавливаем родную прошивку
Если хочешь восстановить родную прошивку, скачай программу для обновления с официального сайта Зума, и повтори шаги по прошивке.
